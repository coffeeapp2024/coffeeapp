"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[772],{2706:function(e,t,r){r.d(t,{GG:function(){return l},Vq:function(){return i},cZ:function(){return f},hg:function(){return c}});var n=r(7437),o=r(2265),a=r(2449),s=r(1657);let i=a.fC,c=a.xz,u=a.h_,l=a.x8,d=o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,n.jsx)(a.aV,{ref:t,className:(0,s.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...o})});d.displayName=a.aV.displayName;let f=o.forwardRef((e,t)=>{let{className:r,children:o,...i}=e;return(0,n.jsxs)(u,{children:[(0,n.jsx)(d,{}),(0,n.jsxs)(a.VY,{ref:t,className:(0,s.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border border-gray-200 bg-white p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg dark:border-gray-800 dark:bg-gray-950",r),...i,children:[o,(0,n.jsx)(a.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-white transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-gray-950 focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-gray-100 data-[state=open]:text-gray-500 dark:ring-offset-gray-950 dark:focus:ring-gray-300 dark:data-[state=open]:bg-gray-800 dark:data-[state=open]:text-gray-400"})]})]})});f.displayName=a.VY.displayName,o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,n.jsx)(a.Dx,{ref:t,className:(0,s.cn)("text-lg font-semibold leading-none tracking-tight",r),...o})}).displayName=a.Dx.displayName,o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,n.jsx)(a.dk,{ref:t,className:(0,s.cn)("text-sm text-gray-500 dark:text-gray-400",r),...o})}).displayName=a.dk.displayName},4499:function(e,t,r){r.d(t,{Ap:function(){return u},I8:function(){return c},db:function(){return l},tO:function(){return d}});var n=r(6142),o=r(8121),a=r(2730),s=r(4905);let i=(0,n.ZF)({apiKey:"AIzaSyC5L-FI5QWb_uDeUdEbeSEmpMwAr9P8ze4",authDomain:"coffee-coin-app.firebaseapp.com",projectId:"coffee-coin-app",storageBucket:"coffee-coin-app.appspot.com",messagingSenderId:"53756991092",appId:"1:53756991092:web:abb9e522247df5f0f6e321",measurementId:"G-PV6MFHBST4"}),c=(0,a.v0)(i),u=new a.hJ,l=(0,o.ad)(i),d=(0,s.cF)(i)},6885:function(e,t,r){r.d(t,{FG:function(){return P},FQ:function(){return m},Pv:function(){return p},XX:function(){return k},YA:function(){return L},Yh:function(){return T},a4:function(){return I},ck:function(){return w},n8:function(){return b},t7:function(){return y},uL:function(){return g},vL:function(){return J},vV:function(){return C},vz:function(){return N},wY:function(){return v},x4:function(){return E},zS:function(){return U}});var n=r(8121),o=r(4499),a=r(4905);let s=(0,n.hJ)(o.db,"users"),i=(0,n.hJ)(o.db,"contents"),c=(0,n.hJ)(o.db,"keys"),u=(0,n.hJ)(o.db,"vouchers"),l=(0,n.hJ)(o.db,"game_random_voucher"),d=(0,n.hJ)(o.db,"levels"),f=(0,n.hJ)(o.db,"products"),h=(0,n.hJ)(o.db,"productTags");async function g(e){let t=(0,n.JU)(s,e.uid);try{if((await (0,n.QT)(t)).exists()||!e.email||!e.displayName)return console.error("User data already exists or user data is incomplete"),null;{let r={email:e.email,displayName:e.displayName,coin:0,balance:.1,startTimeMine:null,endTimeMine:null,voucherIdList:[],LikedEventImageIdList:[],LikedCheckinImageIdList:[]};return await (0,n.pl)(t,r),r}}catch(e){throw console.error("Error creating user data:",e),e}}async function m(e){let t=(0,n.JU)(s,e);try{let e=await (0,n.QT)(t);if(e.exists())return e.data();return console.log("User data not found"),null}catch(e){throw console.error("Error fetching user data:",e),e}}async function p(e,t){let r=(0,n.JU)(s,e);try{await (0,n.pl)(r,t,{merge:!0}),console.log("User data updated successfully")}catch(e){throw console.error("Error updating user data:",e),e}}async function y(e){let t=[];try{for(let r=0;r<e;r++){let e=(0,n.JU)(c),r=e.id;await (0,n.pl)(e,{key:r}),t.push(r)}return t}catch(e){throw console.error("Error generating and saving keys:",e),e}}async function w(){try{let e=await (0,n.PL)(c),t=[];return e.forEach(e=>{let r=e.id;t.push(r)}),t}catch(e){throw console.error("Error fetching keys from Firestore:",e),e}}async function b(e){try{await (0,n.oe)((0,n.JU)(c,e)),console.log("Key deleted successfully:",e)}catch(e){throw console.error("Error deleting key from Firestore:",e),e}}async function v(){try{let e=await (0,n.PL)(u),t=[];return e.forEach(e=>{t.push({id:e.id,...e.data()})}),t}catch(e){throw console.error("Error fetching vouchers from Firestore:",e),e}}async function k(){try{let e=await (0,n.PL)(l),t=[];return e.forEach(e=>{t.push({id:e.id,...e.data()})}),t}catch(e){throw console.error("Error fetching cases from Firestore:",e),e}}async function E(){try{let e=await (0,n.PL)(d),t=[];return e.forEach(e=>{t.push({id:e.id,...e.data()})}),t}catch(e){throw console.error("Error fetching levels from Firestore:",e),e}}function U(e,t){let r=(0,n.JU)(s,e);try{return(0,n.cf)(r,e=>{if(e.exists()){let r=e.data().voucherIdList||[];t(r)}else console.log("User data not found")})}catch(e){throw console.error("Error listening for voucherIdList changes:",e),e}}async function x(e,t){try{let r=(0,a.iH)(o.tO,"".concat(t,"/").concat(e.name)),n=await (0,a.B0)(r,e);return await (0,a.Jt)(n.ref)}catch(e){throw console.error("Error uploading image to Firebase Storage:",e),e}}async function I(e,t,r,a){try{let s=await x(e,a);return{id:(await (0,n.ET)((0,n.hJ)(o.db,a),{userEmail:r,userId:t,imageURL:s,likedNumber:0})).id,userEmail:r,userId:t,imageURL:s,likedNumber:0}}catch(e){throw console.error("Error uploading image and adding to collection:",e),e}}async function N(e,t,r){try{if(!e){console.error("Error updating liked number: ID is empty");return}let a=(0,n.JU)((0,n.hJ)(o.db,r),e);await (0,n.r7)(a,{likedNumber:t}),console.log("Liked number updated successfully.")}catch(e){throw console.error("Error updating liked number:",e),e}}async function L(e){try{let t=await (0,n.PL)((0,n.hJ)(o.db,e)),r=[];return t.forEach(e=>{var t,n,o,a;let s=e.data(),i={id:e.id,userEmail:null!==(t=s.userEmail)&&void 0!==t?t:null,userId:null!==(n=s.userId)&&void 0!==n?n:null,imageURL:null!==(o=s.imageURL)&&void 0!==o?o:null,likedNumber:null!==(a=s.likedNumber)&&void 0!==a?a:0};r.push(i)}),r}catch(e){throw console.error("Error fetching post images:",e),e}}async function J(){try{let e=await (0,n.PL)(f),t=[];return e.forEach(e=>{let r=e.data(),n={id:e.id,img:r.img,name:r.name,price:r.price,tags:r.tags};t.push(n)}),t}catch(e){throw console.error("Error fetching products from Firestore:",e),e}}async function P(){try{let e=await (0,n.PL)(h),t=[];return e.forEach(e=>{let r=e.data();if(r.name&&r.tag){let e={name:r.name,tag:r.tag};t.push(e)}}),t}catch(e){throw console.error("Error fetching product tags from Firestore:",e),e}}async function T(){try{let e=await (0,n.QT)((0,n.JU)(i,"shopPage"));if(!e.exists())return console.log("Document 'shop' does not exist"),null;{let t=e.data(),r=null==t?void 0:t.banner;if(r)return console.log("Banner fetched"),r;return console.log("Banner not found in shop content"),null}}catch(e){throw console.error("Error fetching shop content:",e),e}}async function C(e,t,r){try{let o=(0,n.JU)(s,e),a=await (0,n.QT)(o);if(a.exists()){let{voucherIdList:n}=a.data();if(!n||r>=n.length)throw Error("Invalid index or missing voucherIdList");n.splice(r,1),await p(e,{voucherIdList:n}),console.log("Voucher ID ".concat(t," deleted successfully from user ").concat(e))}else console.log("User ".concat(e," not found"))}catch(e){throw console.error("Error deleting voucher ID from user:",e),e}}},1657:function(e,t,r){r.d(t,{cn:function(){return a}});var n=r(3167),o=r(1367);function a(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,o.m6)((0,n.W)(t))}},8884:function(e,t,r){r.d(t,{Bv:function(){return m},Ep:function(){return c},Kk:function(){return i},MB:function(){return p},OX:function(){return y},Q6:function(){return l},U:function(){return f},Uc:function(){return s},Ur:function(){return u},aD:function(){return g},bL:function(){return o},dk:function(){return b},jc:function(){return w},ny:function(){return h},xE:function(){return a}});var n=r(2020);let o=(0,n.Ue)(e=>({userData:null,userId:null,role:null,setUserData:t=>e({userData:t}),setUserId:t=>e({userId:t}),setRole:t=>e({role:t})})),a=(0,n.Ue)(e=>({homePageContent:null,setHomePageContent:t=>e({homePageContent:t})})),s=(0,n.Ue)(e=>({remainingTimeSeconds:null,setRemainingTimeSeconds:t=>e({remainingTimeSeconds:t})})),i=(0,n.Ue)(e=>({currentCoin:null,setCurrentCoin:t=>e({currentCoin:t})})),c=(0,n.Ue)(e=>({vouchers:null,setVouchers:t=>e({vouchers:t})})),u=(0,n.Ue)(e=>({cases:null,setCases:t=>e({cases:[...t]})})),l=(0,n.Ue)(e=>({levels:null,setLevels:t=>e({levels:t})}));function d(e,t){return(0,n.Ue)(r=>({name:e,posts:t,setName:e=>r({name:e}),setPosts:e=>r({posts:e}),addPost:async e=>{r(t=>({posts:[e,...t.posts]}))},setLikedNumber:async(e,t)=>{let n;return r(r=>{var o;let a=r.posts.map(r=>{var n;return r.id===e?{...r,likedNumber:(null!==(n=r.likedNumber)&&void 0!==n?n:0)+(t?1:-1)}:r});return n=null===(o=a.find(t=>t.id===e))||void 0===o?void 0:o.likedNumber,{...r,posts:a}}),null!=n?n:0}}))}let f=d("eventImages",[]),h=d("checkinImages",[]),g=(0,n.Ue)(e=>({products:null,setProducts:t=>e({products:t})})),m=(0,n.Ue)(e=>({productTags:null,currentTag:"all",setProductTags:t=>e({productTags:t}),setCurrentTag:t=>e({currentTag:t})})),p=(0,n.Ue)(e=>({banner:null,setBanner:t=>e({banner:t})})),y=(0,n.Ue)(e=>({randomVoucherId:null,open:!1,setRandomVoucherId:t=>e({randomVoucherId:t}),setOpen:t=>e({open:t})})),w=(0,n.Ue)(e=>({voucherId:null,index:null,open:!1,setVoucherId:t=>e({voucherId:t}),setIndex:t=>e({index:t}),setOpen:t=>e({open:t})})),b=(0,n.Ue)(e=>({minePageContent:null,setMinePageContent:t=>e({minePageContent:t})}))}}]);